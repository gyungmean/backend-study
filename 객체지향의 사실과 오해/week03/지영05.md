# 05 / 책임과 메시지

## 자율적인 책임
'어떻게(how)' 할지는 객체 자율에 맡기고
'무엇(what)' 해야할지에만 초점을 맞춰주면 된다.
___

## 메시지와 메서드
- 메시지 : 객체의 행동을 유발. 객체간 소통에 사용됨
- 메서드 : 수신자가 메시지 처리를 위해 사용하는 방법. 내부 구현

모자장수.증언하라(어제, 왕국)
'모자장수' = 수신자 / '증언하라' = 메시지 /  '어제','왕국' = 인자 

###  다형성
- 서로 다른 유형의 객체가 동일한 메세지에 대해 다르게 반응
- 송신자 관점에선 수신자가 어떤 방식으로 처리했던 동일한 책임을 수행했다고 인지

### 적은 정보의 메시지로 협력했을 때 장점
수신자는 타입을 맘대로 바꿀 수 있음 (유연한 협력)
수신자의 수행방식, 구현을 맘대로 바꿀 수 있음 (협력 방식 확장)
다양한 객체들이 수신자의 자리 대체 가능 (협력 재사용)

클래스 간 관계에 집중하면 객체 결합도가 높아지지만,
메시지를 사용하면 객체 결합도를 낮출 수 있다.
___

## 메시지를 따라라
### 데이터 주도 설계
- 데이터 중심으로 객체를 설계하는 것. 데이터 구조(내부 구조)를 객체 정의의 일부로 만들어 버림
- 데이터 주도 설계 시 객체 내부구조를 바꾸기 어려움. 객체 내부로 바꾸면 외부까지 영향을 받게 됨

### 책임 주도 설계
- 책임 완수를 목적으로 객체들을 이용해 시스템을 설계
- 데이터에 대한 결정보다 객체 행위에 대해 먼저 고려
- 객체가 책임 완수를 위해 다른 객체 도움을 필요로 하는지 판단한 후 (= 메시지가 필요한지 판단)
- 메시지가 필요하다고 판단되면 적합한 수신 객체를 선택하는 식으로 설계
- 수신자는 송신자가 보낸 메시지에 대한 기대(책임)를 만족시켜야 함

### What,Who 사이클 / 묻지 말고 시켜라 / 데메테르 법칙 (Law of Demeter)
- 'What'(메시지 = 어떤 행위를 수행할 것인지), 'Who' (수신 객체 = 누가) 그 행위를 수행할 것인지 결정
- ‘How’ 어떻게 처리할 지는 묻지 말고, 그냥 수신 객체에게 시키자!
- 책임을 완수할 것이라 믿고, 어떻게 처리할지는 객체에게 맡긴다
- 객체를 자율적으로 만들고 캡슐화를 보장한다
___  

## 객체 인터페이스
### 메시지가 인터페이스를 결정한다
- 객체의 인터페이스는 객체가 수신할 수 있는 메시지의 목록으로 구성된다.
- 객체가 어떤 메시지를 수신할 수 있는지가 객체가 제공하는 인터페이스의 모양을 결정한다.

### 공용 인터페이스
- 공용 인터페이스: 객체가 외부로부터 수신할 수 있는 메시지
- 내부 인터페이스: 객체가 자기 자신으로부터 주고받을 수 있는 메시지
___

## 인터페이스와 구현의 분리
- 소프트웨어는 항상 변경되기 때문에, 객체의 내부 구현을 변경에 대한 안전 지대로 만들어 공용 인터페이스와 분리해야 한다.
- 객체 외부에 영향을 미치는 변경은 객체의 공용 인터페이스를 수정할 때뿐이어야 한다.
- 메시지와 송신자와 수신자가 구체적인 구현이 아니라 느슨한 인터페이스에 대해서만 결합되어야 한다.

### 캡슐화
객체의 자율성을 보존하기 위해 구현을 외부로부터 감추는 것

### 상태와 행위의 캡슐화
- 데이터 캡슐화(data encapsulation)
- 객체는 상태와 행위를 하나의 자율적인 단위로 묶은 후, 외부에서 반드시 접근해야만 하는 행위만 골라 공용 인터페이스에 노출한다.
___

## 책임의 자율성이 협력의 품질을 결정한다
1. 자율적이고 적절하게 **추상화**된 책임은 협력을 단순하게 만든다.
2. 자율적인 책임은 객체의 외부인 공용 인터페이스와 내부를 명확하게 분리하고 **캡슐화**한다.
3. 책임이 자율적인 경우 책임을 수행하는 내부적인 방법을 변경하더라도 외부에 영향을 미치지 않아 **결합도**가 낮아진다.
4. 자율적인 책임은 협력의 대상을 다양하게 선택할 수 있도록 하기 때문에 설계가 유연해지고 **재사용성**이 높아진다.
5. 객체가 수행하는 책임들이 자율적일수록 객체의 **응집도**를 높은 상태로 유지하기가 쉬우며 역햘을 이해하기 쉽다
