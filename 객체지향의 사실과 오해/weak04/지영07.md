## 07 / 함계 모으기
### 개념 관짐(Conceptual Perspective)
설계는 도메인 안에 존재하는 개념과 개념들 사이의 관계를 표현

도메인: 사용자들이 관심을 가지고 있는 특정 분야나 주제 vs 도메인(인터넷 주소):사용자가 웹 사이트 주소를 쉽게 기억할 수 있도록 만든 도메인
소프트웨어: 도메인에 존재하는 문제를 해결하기위해 개발된다.

### 명세 관점(Specification Perspective)
**개발자의 영역인 소프트웨어**로 초점(사용자 영역인 도메인을 벗어나)
도메인이서 벗어나 소프트웨어 안에서 살아 숨쉬는 **객체들의 책임**에 초점

구현이 아니라 인터페이스에 대해 프로그래밍하라[GOF 2994]
-> 명세 관점과 구현 관점을 명확하게 분리
</br>ISP
</br> OrderService는 CardPayment인지 KakaoPayPayment인지 몰라도 됨.
그냥 PaymentProcessor 인터페이스만 알면 됨.
나중에 PaypalPayment, NaverPayPayment를 추가해도 클라이언트 코드는 수정할 필요 없음

```java // 인터페이스: 계약 정의
interface PaymentProcessor {
    void pay(int amount);
}

// 구현 1
class CardPayment implements PaymentProcessor {
    public void pay(int amount) {
        System.out.println("카드 결제: " + amount);
    }
}

// 구현 2
class KakaoPayPayment implements PaymentProcessor {
    public void pay(int amount) {
        System.out.println("카카오페이 결제: " + amount);
    }
}

// 클라이언트 코드
class OrderService {
    private PaymentProcessor processor;

    public OrderService(PaymentProcessor processor) {
        this.processor = processor;
    }

    public void checkout(int amount) {
        processor.pay(amount);
    }
}
```

### 구현 관점(Implementation Perspective)
프로그래머인 우리에게 익숙한 관점
실제 작업을 수행하는 코드와 연관

객체들이 책임을 수행하는 데 필요한 동작하는 코드를 작성하는 것이다.
프로그래머는 객체의 책임을 '어떻게' 수행할 것인가에 초점을 맞추며 인터페이스를 구현하는 데 필요한 속성과 메서드를 클래스에 추가

개념 관점, 명세 관점, 구현 관점 순서대로 소프트웨어 개발 X
동일한 클래스를 세 가지 다른 방향에서 바라보는 것

클래스가 은유하는 **개념**: 도메인 관점을 반영
클래스의 공용 **인터페이스**: 명세 관점
클래스의 속성과 **메서드**: 구현 관점

(책에 없는 내용) 인터페이스(자바)는 자바에서 클래스들이 구현해야 하는 동작을 지정하는데 사용되는 추상 자료형
interface라는 키워드 사용, static final
인터페이스도 따지고 보면 상속이지만 extends 키워드 대신 implements 라는 '구현' 이라는 키워드를 사용하는 이유는?
상속은 클래스간의 부모 - 자식 관계를 연관 시키는데 의미가 중점 된다면, 구현은 클래스를 확장 시켜 다양히 이용하는데 중점이 되기 때문이다.

예제)
목표
1. 도메인 모델에서 시작해서 최종 코드까지의 구현 과정을 간략하게나마다 설명한다.
2. 구현 클래스를 개념 관점, 명세 관점, 구현 관점에서 바라본다는 것이 무엇을 의미하는지를 설명하는 것

커피 전문점 도메인
목저기 커피 전문점에서 커피를 주문하는 과정-> 객체들의 협력 관계로 구현
<img width="500" height="400" alt="image" src="https://github.com/user-attachments/assets/10d7e760-6b2c-4686-9dcc-6aab0d905e43" />


동일한 타입의 인스턴스
손님 객체는 '손님 타입'의 인스턴스로 볼 수 있다.
바르스타 객체는 '바르스타 타입'의 인스턴스
아메리카노 커피, 에스프레소 커피, 캄라멜 마키야또 커피, 카푸치노 커피는 '커피 타입'의 인스턴스


타입 간에 어떤 관계가 존재하는 지 알아보자.

하나의 메뉴판 객체는 다수의 메뉴 항목이 객체로 구성돼 있다. 메뉴판과 메뉴 항목 객체는 따로 떨어져 존재하지 않으며 하나의 단위로 움직인다.

메뉴판과 메뉴 항목은 포함containment관계 또는 합성compostition관계를 나타낸다.
<img width="400" height="100" alt="image" src="https://github.com/user-attachments/assets/05709fd6-703e-49ee-b912-2a3e2e554ff5" />

메뉴판 타입과 메뉴 항목 타입 간의 포함 관계

손님 타입은 메뉴판 타입을 알고 있어야 원하는 커피를 선택할 수 있다. 이처럼 한 타입의 인스턴스가 다른 타입의 인스턴스를 포함하지는 않지만 서로 알고 있어야 할 경우를 연관assocation관계라고 한다.

<img width="400" height="200" alt="image" src="https://github.com/user-attachments/assets/39f88aa4-e216-4af4-8970-e5f04ca6dcb9" />
손님과 메뉴판 사이의 연관 관계

바라스타 타입은 커피를 제조해야 하므로 커피 타입을 알고 있어야 한다
포함관계X
커피 전문점을 구성하는 타입들
<img width="400" height="300" alt="image" src="https://github.com/user-attachments/assets/1b3dda42-2327-46bf-b885-0d009d936fb1" />

이처럼 SW가 대상으로 하는 영역인 도메인을 단순화해서 표현한 모델을 도메인 모델
도메인 모델을 작성하는 단계에서 포함관계, 연관관계가 중요하지 않다
초점은 어떤 타입이 도메인을 구성하느냐와 타입들 사이에 어떤 관계가 **존재**하는지 파악암으로써 도메인을 이해하는 것이다. p.214

## 설계하고 구현하기
협력을 설계: 객체가 메세지를 선택하는 것이 아니라 메시지가 객체를 선택
1. 메세지를 먼저 선택, 2.메세지를 수신하기에 적절한 객체 선택

ex) 커피를 주문하라
객체: 능동적이고 자율적인 존재(메뉴판도 현실에서는 수동적 존재이지만 객체지향 서계로 들어오면 스스로 메뉴 항목을 찾는다) - 의인화!
손님 객체는 커피를 주문할 책임을 할당
메시지	책임을 수행할 적절한 객체

| 메시지           | 책임을 수행할 적절한 객체       |
|------------------|--------------------------------|
| 커피를 주문하라  | 손님                           |
| 메뉴 항목을 찾아라 | 메뉴판 (메뉴 항목 반환)         |
| 커피를 제조하라  | 바리스타 (커피 반환)            |
| 커피를 생성하라  | 커피                           |





