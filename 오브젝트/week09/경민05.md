# 책임 할당하기
## 책임 주도 설계를 향해
```
객체를 가지고 있기 때문에 메시지를 보내는것이 아니다.
메시지를 전송하기 때문에 객체를 갖게 된 것이다.
```
## 책임 할당을 위한 GRASP패턴
### 정보 전문가에게 책임을 할당하라
`INFORMATION EXPERT`패턴 : 책임을 정보 전문가 즉, 책임을 수행하는데 필요한 정보를 가지고 있는 객체에 할당한다.

책임을 수행하는 객체가 정보를 **알고** 있다고 해서 그 정보를 **저장**할 필요는 없다.  
객체는 해당 정보를 제공할 수 있는 다른 객체를 알고 있거나 필요한 정보를 계산해서 제공할 수도 있다.

### 높은 응집도와 낮은 결합도
`LOW COUPLING`패턴  
Screening을 Movie에만 의존하던 기존 설계와 다르게  
DiscountCondition을 직접 참조하도록 바꿀 수 있다.  
하지만 왜 기존 방식이 더 낮은 결합도를 가질까?

Movie는 속성으로 DiscountCondition의 목록을 가지고 있다.
따라서 Movie와 DiscountCondition은 이미 결합돼 있기 때문에 Movie를 DiscountCondition과 협력하게 설계하면  
설계 전체적인 결합도를 낮출 수 있다.

## 구현을 통한 검증
`POLYMORPHISM` 패턴
### 다형성을 통해 분리하기
역할을 사용하면 객체의 구체적인 타입을 추상화 할 수 있다.
기간 할인 조건과 순번 할인 조건을 DiscountCondition으로 추상화 하는 것처럼.  
자바에서는 클래스들 사이에서 구현을 공유해야 할 필요가 있다면 추상클래스  
객체들의 책임만 정의한다면 인터페이스
### 변경으로 부터 보호하기
`PROTECTED VARIATIONS` 패턴
안정적인 인터페이스 뒤로 변경을 캡슐화 한다면 코드 수정의 파급 효과를 조절할 수 있다.

## 책임 주도 설계의 대안
### 메서드 응집도
객체로 책임을 분배할 때 가장 먼저 할 일은 메서드를 응집도 있는 수준으로 분해하는 것.  
긴 메서드를 작고 응집도 높은 메서드로 분리하면 각 메서드를 적절한 클래스로 이동 시키기 더 수월하다. 
### 객체를 자율적으로 만들자
예를 들어서 DiscountCondition의 getType 메서드를 호출해서 할인 조건의 타입을 알아 낸 후 타입에 따라 메서드를 호출하는 코드에서
```java
private boolean isDiscountable(DiscountCondition condition, Screening screening) {
    if(condition.getType() == ....)
}
```
이런 경우 DiscountCondition에 속한 데이터를 주로 이용하기 때문에  
해당 클래스 안으로 이동 시키고 ReservationAgency에서 삭제를 하는 것이 더 효율적이다.