# 05/ 책임 할당하기

## 1.책임 주도 설계를 향해
설계의 2가지 원칙
- 데이터보다 행동을 먼저 결정하라
- 협력이라는 문맥 안에서 책임을 결정하라
  - 책임은 객체의 입장이 아니라 객체가 참여하는 협력에 적합해야 함. 메시지(클라이언트)를 결정한 후에 이 메시지를 받을 객체를 선택해야 함.

책임 주도 설계
- 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
- 시스템 책임을 더 작은 책임으로 분할한다.
- 분활된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
- 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 다시 찾는다.
- 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

## 2.책임 할당을 위한 GRASP패턴
GRASP패턴 - General Responsibility Assignment Software Pattern (일반적인 책임 할당을 위한 소프트웨어 패턴)
객체에게 책임을 할당할 때 지침으로 삼을 수 있는 원칙들의 집합을 패턴 형식으로 정리한 것이다.

- 도메인 개념에서 출발하기
- 정보 전문가에게 책임을 할당하라
  - 애플리케이션이 제공해야 하는 기능을 애플리케이션의 책임으로 생각하고, 이 책임을 애플리케이션에 대해 전송된 메시지로 간주하여 이 메시지를 책임질 첫 객체를 선택하는 것이 설계의 시작임.
  - 객체에게 책임을 할당하는 첫 원칙은, 책임을 수행할 정보를 알고 있는 객체(정보 전문가)에게 책임을 할당하는 것임.
- 높은 응집도와 낮은 결합도
  - 책임을 할당할 수 있는 다양한 대안이 있다면 응집도와 결합도의 측면에서 더 좋은 대안을 선택해야 함.
  - 창조자에게 객체 생성 책임을 할당하라  
  아래 조건을 가장 많이 만족하는 객체(A)에게 객체(B) 생성 책임을 할당하라.
    - A는 B 객체를 포함하거나 참조한다.
    = A는 B 객체를 기록한다.
    - A는 B 객체를 긴밀하게 사용한다.
    - A는 B 객체를 초기화하는 데 필요한 데이터를 갖고 있다. (A는 B 객체에 대한 정보 전문가 패턴)


## 3.구현을 통한 검증
- 다형성을 통한 분리하기 - POLYMORPHISM(다형성) 패턴
  - 다형성을 통해서 새로운 변화에 대응하기 쉽게 확장
- 변경으로부터 보호하기 - PROTECTED VARIATIONS(변경 보호) 패턴
  - 변화가 예상되는 지점을 식별하고, 그 주위에 안정된 인터페이스를 형성하도록 책임을 할당. 책임 할당의 관점에서 캡슐화를 설명한 것임.

** 개발자가 변경에 대비하는 방법**
- 코드를 이해하고 수정하기 쉽게 단순하게 설계
- 코드를 수정하지 않고 변경을 수용할 수 있도록 코드를 더 유연하게 만드는 것

## 4.책임 주도 설계의 대안
- 책임과 객체 사이에서 방황할 때 돌파구를 찾기 위한 방법
  - 최대한 빠르게 목적한 기능을 수행하는 코드를 작성
  - 아무것도 없는 상태에서 책임과 협력에 관해 고민하기 보다는 일단 실행되는 코드를 얻고 난 후에 코드 상에 명확하게 드러나는 책임들을 올바른 위치로 이동시키기

- 리팩터링 : 겉으로 보이는 동작은 바꾸지 않은 채 내부 구조를 변경하는 것

- 긴 메서드(몬스터 메서드)가 유지보수에 미치는 부정적 영향
  - 코드를 전체적으로 이해하는 데 너무 많은 시간이 걸린다.
  - 변경이 필요할 때 수정해야 할 부분을 찾기 어렵다.
  - 일부 로직만 수정하더라도 버그가 발생할 확률이 높다.
  - 로직의 일부만 재사용하는 것이 불가능
  - 코드를 재사용하는 유일한 방법은 복붙 뿐이므로 코드 중복을 초래하기 쉽다.


- 메서드를 응집도 있는 수준으로 분해
  - public 메서드가 상위 수준의 명세를 읽는 것 같은 느낌이 든다. 
  - 단, 이름을 잘 지었을 때만 그 진가가 드러난다.

